{{ $filteredPosts := where .Site.RegularPages "Type" "in" site.Params.mainSections }}
{{ $relatedPosts := shuffle $filteredPosts | first 5 }}
{{- if $relatedPosts }}
<div class="panel">
  <h3 class="panel__heading">Recent Posts</h3>
  <div class="">
    {{ range $relatedPosts }}
    <a href="{{ .RelPermalink }}" class="panel__link">
      <div class="">
        <h4 class="summary__heading summary__heading--panel">{{.Title}}</h4>
        <p class="summary__text">
          <time>{{.Date.Format "02/01/2006"}}</time>
        </p>
      </div>
      {{- end }}
    </a>
    {{- end }}
  </div>
</div>